<!DOCTYPE html>
<html>
	<head>
		<title>
			Listing Wizard
		</title>
		<link rel="icon" href="https://static.thenounproject.com/png/657180-200.png">
		<style>
			.genLabel {
				display:inline-block;
				width: 100px;
				margin: 10px 20px 10px 0;
			}
			
			.genInput {
				width: calc(100% - 200px);
				margin: 10px 20px 10px 0;
			}
			
			.scriptBox {
				padding:10px;
				border: solid 1px gray;
			}
		</style>
	</head>
	<body>
		<h2>Listing Script Wizard</h2>
		<form action="/action_page.php">
			<label class="genLabel" for="name">Name: </label>
			<input class="genInput" id="name"><br> 
			<label class="genLabel" for="prefix">Code prefix: </label>
			<input class="genInput" id="prefix"><br>  
			<label class="genLabel" for="desc">Description: </label>
			<textarea rows="4" cols="80" id="desc"></textarea>  <br>  
			<label class="genLabel" for="imgPath">Image path: </label>
			<input class="genInput" id="imgPath">  <br>  
			<label class="genLabel" for="web">Website: </label>
			<input class="genInput" id="web">  <br>  
			<label class="genLabel" for="email">Email: </label>
			<input class="genInput" id="email">  <br>  
			<label class="genLabel" for="ig">Instagram: </label>
			<input class="genInput" id="ig">  <br>
			<label class="genLabel" for="fb">Facebook: </label>
			<input class="genInput" id="fb">  <br>
			<label class="genLabel" for="phone">Phone: </label>
			<input class="genInput" id="phone">  <br>
			<br> <br> <hr> <br>
			<label class="genLabel" for="addy">Address: </label>
			<input class="genInput" id="addy">   
			<label class="genLabel" for="amazon">Amazon: </label>
			<input class="genInput" id="amazon"> <br>
			<label class="genLabel" for="bc">Bandcamp: </label>
			<input class="genInput" id="bc">  <br>
			<label class="genLabel" for="bsky">Bluesky: </label>
			<input class="genInput" id="bsky">  <br>
			<label class="genLabel" for="etsy">Etsy: </label>
			<input class="genInput" id="etsy">  <br>
			<label class="genLabel" for="gr">GoodReads: </label>
			<input class="genInput" id="gr">  <br>
			<label class="genLabel" for="lt">Linktree: </label>
			<input class="genInput" id="lt">  <br>
			<label class="genLabel" for="patreon">Patreon: </label>
			<input class="genInput" id="patreon">  <br>
			<label class="genLabel" for="person">Person: </label>
			<input class="genInput" id="person">  <br>  
			<label class="genLabel" for="spotify">Spotify: </label>
			<input class="genInput" id="spotify">  <br>
			<label class="genLabel" for="tiktok">TikTok: </label>
			<input class="genInput" id="tiktok">  <br>
			<label class="genLabel" for="twitter">Twitter: </label>
			<input class="genInput" id="twitter">  <br>
			<label class="genLabel" for="vimeo">Vimeo: </label>
			<input class="genInput" id="vimeo">  <br>
			<label class="genLabel" for="yt">YouTube: </label>
			<input class="genInput" id="yt">  <br><br>
			<input type="button" onclick="genListing()" value="Generate listing">
		</form> 
		<p>Script:</p>
		<div class="scriptBox">
			<pre><code id="jsScript">Enter values to generate script!</code></pre>
		</div>
		<br><br><br><br><br><br>
		<script> 
			const amazon  = {id:"amazon",  icon:"amazon_icon.png",   friendly:"Amazon"};
			const bc      = {id:"bc",      icon:"bandcamp_icon.png", friendly:"Bandcamp"};
			const bsky    = {id:"bsky",    icon:"bsky_icon.png",     friendly:"Bluesky"};
			const etsy    = {id:"etsy",    icon:"etsy_icon.png",     friendly:"Etsy"};
			const fb      = {id:"fb",      icon:"fb_icon.png",       friendly:"Facebook"};
			const gr      = {id:"gr",      icon:"gr_icon.png",       friendly:"Goodreads"};
			const lt      = {id:"lt",      icon:"linktree.png",      friendly:"Linktree"};
			const patreon = {id:"patreon", icon:"patreon_icon.png",  friendly:"Patreon"};
			const person  = {id:"person",  icon:"person_icon.png",   friendly:"Artist Profile"};
			const spotify = {id:"spotify", icon:"spotify_icon.png",  friendly:"Spotify"};
			const spotify = {id:"tiktok",  icon:"tiktok_icon.png",   friendly:"TikTok"};
			const spotify = {id:"twitter", icon:"twitter_icon.png",  friendly:"Twitter"};
			const vimeo   = {id:"vimeo",   icon:"vimeo_icon.png",    friendly:"Vimeo"};
			const web     = {id:"web",     icon:"web_icon.png",      friendly:"Visit the website"};
			const yt      = {id:"yt",      icon:"yt_icon.png",       friendly:"Facebook"}; 
         
			function genListing() {
				var pf = document.getElementById("prefix").value;
				var name = document.getElementById("name").value;
				var desc = document.getElementById("desc").value;
				var imgPath = document.getElementById("imgPath").value;
				var email = document.getElementById("email").value;
				var ig = document.getElementById("ig").value;
				var phone = document.getElementById("phone").value;
				var address = document.getElementById("addy").value;
				let socialsArr = "\t\t\t\t\t" + "const " + pf + "_socials = [";
				let myScript =  "\t\t\t\t" + "\&lt;script\&gt;" + "\n" +
					"\t\t\t\t\t" + "const " + pf + "_name = '" + name + "';\n" +
					"\t\t\t\t\t" + "const " + pf + "_desc = '" + desc + "';\n" +
					"\t\t\t\t\t" + "const " + pf + "_imgLoc = '" + imgPath + "';\n";
                    
				if (ig != "") {
					myScript +=  "\t\t\t\t\t" + "const " + pf + '_ig = {icon:"ig_icon.png", url:"https://www.instagram.com/' + ig + '/", friendly:"@' + ig + '"};\n';
					socialsArr += pf + '_ig, ';
				}
                
				if (email != "") {
					myScript +=  "\t\t\t\t\t" + "const " + pf + '_mail = {icon:"mail_icon.png", url:"mailto:' + email + '", friendly:"' + email + '"};\n';
					socialsArr += pf + '_mail, ';
				}
                
				if (phone != "") {
					myScript +=  "\t\t\t\t\t" + "const " + pf + '_phone = {icon:"phone_icon.png", url:"tel:' + phone.slice(0,3) + '-' + phone.slice(3,6) + '-' + phone.slice(6,10) + '", friendly:"(' + phone.slice(0,3) + ') ' + phone.slice(3,6) + '-' + phone.slice(6,10) + '"};\n';
					socialsArr += pf + '_phone, ';
				}
                
				const socials = [web, fb, amazon, bc, bsky, etsy, gr, lt, patreon, person, spotify, vimeo, yt];
				for (social of socials) {
					var socialValue = document.getElementById(social.id).value;
					if (socialValue != "") {
						myScript += "\t\t\t\t\t" + "const " + pf + "_" + social.id + ' = {icon:"' + social.icon + '", url:"' + socialValue + '", friendly:"' + social.friendly + '"};\n';
						socialsArr += pf + "_" + social.id + ", ";
					}
				}
                
				if (address != "") {
					myScript +=  "\t\t\t\t\t" + "const " + pf + '_address = {icon:"loc_icon.png", url:"https://www.google.com/search?q=:' + address + '", friendly:"' + address + '"};\n';
					socialsArr += pf + '_address, ';
				}
                
				socialsArr += "];";
				myScript += socialsArr + "\n";
				myScript += "\t\t\t\t\t" + "makeListing(" + pf + "_imgLoc, " + pf + "_name, " + pf + "_desc, " + pf + "_socials);" + "\n" + "\t\t\t\t" + "&lt;/script&gt;" + "\n";                
				document.getElementById("jsScript").innerHTML = myScript;                
				document.getElementById("myScript").innerHTML = myScript;
			}
            
			function copyScript() {
				copyText = document.getElementById("jsScript").outerHTML;
				function listener(e) {
					e.clipboardData.setData("text/html", copyText);
					e.clipboardData.setData("text/plain", copyText);
					e.preventDefault();
				}
				document.addEventListener("copy", listener);
				document.execCommand("copy");
				document.removeEventListener("copy", listener);
			}
		</script>
	</body>
</html>
